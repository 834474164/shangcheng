
    <!-- 右 -->
    <div class="content">
        <div class="header">
            <h1 class="page-title">权限新增</h1>
        </div>

        <div class="well">
            <!-- add form -->
            <form id="tab" action="{:url('update')}" method="post">
                <input type="hidden" name="id" value="{$authdata.id}">
                <label>权限名称：</label>
                <input type="text" name="auth_name" value="{$authdata.auth_name}" class="input-xlarge">
                <label>上级权限</label>
                <select pid="{$authdata.pid}" name="pid" class="input-xlarge">
                    <option value="0">作为顶级权限</option>
                    {foreach $topauth  as $v}
                    <option  value="{$v.id}" {if($v.id eq $authdata.pid)}selected="selected"{/if}>{$v.auth_name}</option>
                    {/foreach}
                </select>
                <div>
                    <label>控制器：</label>
                    <input type="text" name="auth_c" value="{$authdata.auth_c}" class="input-xlarge">
                </div>
                <div>
                    <label>方法：</label>
                    <input type="text" name="auth_a" value="{$authdata.auth_a}" class="input-xlarge">
                </div>
                <label>是否菜单项</label>
                <select name="is_nav" class="input-xlarge">
                    <option value="1">是</option>
                    <option value="0" {if($authdata.is_nav eq '否')}selected="selected"{/if}>否</option>
                </select>

                <label></label>
                <button class="btn btn-primary" type="submit">保存</button>
            </form>
        </div>

    <script>
        $(function(){
            $("input[name=auth_c]").parent().hide();
            $("input[name=auth_a]").parent().hide();
            // 直接判断并回显当前权限分类
            var id=$("select[name=pid]").attr('pid');
            if(id>0){
                $("input[name=auth_c]").parent().show();
                $("input[name=auth_a]").parent().show();
            }
            $("select[name=pid]").on('change', function(){
                if($(this).val() != 0){
                    $("input[name=auth_c]").parent().show();
                    $("input[name=auth_a]").parent().show();
                }else{
                    $("input[name=auth_c]").parent().hide();
                    $("input[name=auth_a]").parent().hide();
                }
            });
        })
    </script>
